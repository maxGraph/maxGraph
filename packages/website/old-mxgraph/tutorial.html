<!-- no longer available in maxGraph -->

<h1><a id="Overview"></a>Overview</h1>
<p>
  The mxGraph package contains a client software, written in JavaScript, and a series
  of backends for various languages. The client software is a graph component with
  an optional application wrapper that is integrated into an existing web interface.
  The client requires a webserver to deliver the required files to the client or
  can be run from the local filesystem without a webserver. The backends may be used
  as is, or they may be embedded into an existing server application in one of the
  supported languages.
</p>
<img src="images/architecture.png">
<p>
  If a backend exists, then the client may be configured to use this backend in
  various ways, such as:
</p>
<ul>
  <li>Creating images</li>
  <li>Storing and loading diagrams</li>
  <li>Creating an object representation of a graph</li>
</ul>
<p>
  The above scenarios maybe combined in various ways, such as sending an XML
  description of each change to the backend as it happens, or autosaving of
  the diagram to avoid loss of data on the client. The client can also operate in
  offline mode, where it does not require a backend or a webserver.
</p>
<p>
  Please have a look at the index files in the respective directories for
  information on the various backends.
</p>
<ul>
  <li><a href="../java/index.html">Java</a></li>
  <li><a href="../dotnet/index.html">.NET</a></li>
  <li><a href="../php/index.html">PHP</a></li>
</ul>

<!-- END OF - no longer available in maxGraph -->


<!-- does not apply to maxGraph -->
<h2><a id="Library"></a>Library</h2>
<p>
  The HEAD part of the page contains the JavaScript code and dependencies.
  The library is loaded using the following code. The  <code>mxBasePath</code>
  variable is used to define the path where the library loads its resources
  from. This variable must be defined prior to loading the library code and
  should not include a trailing slash.
</p>
<pre>
&lt;script type="text/javascript"&gt;
  mxBasePath = 'javascript/src';
&lt;/script&gt;
&lt;script type="text/javascript" src="javascript/src/js/mxClient.js"&gt;&lt;/script&gt;
</pre>
<p>
  <a href="https://github.com/jgraph/mxgraph/tree/master/javascript"><code>mxClient.min.js</code></a>
  contains all required code in a single, minified, file. This is the file you
  should use in production. During development, if you wish to change mxGraph
  sources, use the bootstrapped <a href="https://github.com/jgraph/mxgraph/blob/master/javascript/src/js/mxClient.js"><code>mxClient.js</code></a> file.
</p>
<h2><a id="BrowserCheck"></a>Browser Check</h2>
<p>
  The next script tag in the HEAD part of the page contains the
  Hello, World! example code. The first part of the code checks if the
  browser that is displaying the page is supported by the library. It is
  recommended to do this as the first step of the program and
  display an error message if the browser is not supported. In your
  document you may also want to include a NOSCRIPT directive for
  browsers that have JavaScript disabled, however, in our examples this
  directive is not used.
</p>
<p>
  There is no convention for the name of the main function. The function
  is invoked from the <code>onload</code> handler in the page and may have any name
  and arguments. In this case, the argument is a  DOM node that will contain
  the graph. Note that the DOM node may have any ID and that the code
  is independent of this ID.
</p>
<pre>
&lt;script type="text/javascript";&gt;
function main(container)
{
  // Checks if the browser is supported
  if (!mxClient.isBrowserSupported())
  {
    // Displays an error message if the browser is not supported.
    mxUtils.error('Browser is not supported!', 200, false);
  }
  ...
</pre>
<!-- END OF - does not apply to maxGraph -->


<!-- ================================================================================= -->
<!-- already move to the codecs page -->
<!-- ================================================================================= -->
<h1><a id="InputOutput"></a>Input/Output</h1>


<b>TODO add link to the codecs page</b>

<!--<p>-->
<!--  The default encoding scheme maps all non-object fields to string-->
<!--  attributes and all object fields to child nodes, using the constructor-->
<!--  name of the object as the nodename and the fieldname for the as-attribute-->
<!--  value. This default encoding scheme may be overridden by custom codecs,-->
<!--  which are registered in the-->
<!--  <a href="js-api/files/io/mxCodecRegistry-js.html">mxCodecRegistry</a>.-->
<!--</p>-->
<!--<p>-->
<!--  For example, consider the following JavaScript object definition:-->
<!--</p>-->
<!--<pre>-->
<!--let object = {};-->
<!--object.myBool = true;-->
<!--object.myObject = {};-->
<!--object.myObject.name = 'Test';-->
<!--object.myArray = ['a', ['b', 'c'], 'd'];-->
<!--</pre>-->
<!--<p>-->
<!--  To encode this object and show the resulting XML in a new window,-->
<!--  the following code is used:-->
<!--</p>-->
<!--<pre>-->
<!--let encoder = new mxCodec();-->
<!--let node = encoder.encode(object);-->
<!--mxUtils.popup(mxUtils.getXml(node));-->
<!--</pre>-->
<!--<p>-->
<!--  And here is the XML structure that represents the object:-->
<!--</p>-->
<!--<pre>-->
<!--&lt;Object myBool="1"&gt;-->
<!--  &lt;Object name="Test" as="myObject"/&gt;-->
<!--  &lt;Array as="myArray"&gt;-->
<!--    &lt;add value="a"/&gt;-->
<!--    &lt;Array&gt;-->
<!--      &lt;add value="b"/&gt;-->
<!--      &lt;add value="c"/&gt;-->
<!--    &lt;/Array&gt;-->
<!--    &lt;add value="d"/&gt;-->
<!--  &lt;/Array&gt;-->
<!--&lt;/Object&gt;-->
<!--</pre>-->
<!--<p>-->
<!--  Note that the codecs will turn booleans into numeric values, no-->
<!--  array indices are stored if they are numeric and non-object-->
<!--  array members are stored inside the value-attribute.-->
<!--  Furthermore one may include other XML files by-->
<!--  use of the <code>include</code> directive in the XML structures.-->
<!--</p>-->

<!-- ================================================================================= -->
<!-- in 2 -->
<!-- ================================================================================= -->


<h2><a id="Files"></a>Files</h2>
<p>
  The save, open, readGraphModel and writeGraphModel functions
  implement a standard mechanism for handling files in
  <a href="js-api/files/editor/mxEditor-js.html">mxEditor</a>.
</p>
<p>
  The default implementation of <code>mxEditor.save</code> is called
  with an argument to indicate if the save was triggered by the user or
  by the system. It then uses the <code>urlPost</code> variable of
  the editor object to check if a post request should be issued. If
  the variable is defined, the editor issues a post request to the
  specified URL passing the XML along as a POST variable called xml.
</p>
<h2><a id="Post"></a>Post</h2>
<p>
  As an example, consider the following PHP file which is located
  in the same directory as the HTML page. If the filename is server.php
  then the urlPost variable must be set to server.php on the editor
  in order to post the diagram to the server. The PHP file will get
  the XML from the POST request and write it to a file called
  diagram.xml.
</p>
<pre>
&lt;?php
$xml = $HTTP_POST_VARS['xml'];
if ($xml != null) {
  $fh=fopen("diagram.xml","w");
  fputs($fh, stripslashes($xml));
  fclose($fh);
}
?&gt;
</pre>
<p>
  To set the URL to post to, change the respective entry in the mxEditor node of the config file as follows:
</p>
<pre>
&lt;mxEditor urlPost="http://www.example.com/server.php" ... &gt;
</pre>
<p>
  Keep in mind that the JavaScript can only post to the server where it originated from, so we recommend
  to use relative URLs, eg. server.php.
</p>
<h2><a id="FormFields"></a>Form Fields</h2>
<p>
  If you need to read/write the graph from/to a string (eg. to fill a form-field), you can use the
  following methods:
</p>
<pre>
let data = editor.writeGraphModel();
editor.readGraphModel(mxUtils.parseXml(data));
</pre>
<h2><a id="Codecs"></a>Codecs</h2>
<p>
  For encoding other objects, or if no editor instance is available,
  the <a href="js-api/files/io/mxCodec-js.html">mxCodec</a> can be
  used to create and read XML data.
</p>
<hr size="1">
&copy; 2006-2017 by JGraph Ltd.
</body>
</html>
